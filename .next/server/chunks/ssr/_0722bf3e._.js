module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},93482,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(50944);function f(){let a=(0,e.useRouter)(),[f,g]=(0,d.useState)(""),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(""),[l,m]=(0,d.useState)(!1),n=async b=>{b.preventDefault(),m(!0),k("");try{let b=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f,password:h})}),c=await b.json();if(c.success){localStorage.setItem("isLoggedIn","true");let b=c.data.userInfo.id,d=await fetch(`/api/users/${b}`);if(d.ok){let a=await d.json();localStorage.setItem("user",JSON.stringify(a))}else localStorage.setItem("user",JSON.stringify(c.data.userInfo));window.dispatchEvent(new Event("userLoggedIn"));try{a.push("/")}catch(a){console.error("Router push failed:",a),window.location.href="/"}}else k(c.message||"登录失败，请稍后重试")}catch(a){k("登录失败，请重试")}finally{m(!1)}};return(0,b.jsx)("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"登录到您的账户"}),(0,b.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["或"," ",(0,b.jsx)(c.default,{href:"/register",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"创建一个新账户"})]})]}),j&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:j}),(0,b.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:n,children:[(0,b.jsx)("input",{type:"hidden",name:"remember",defaultValue:"true"}),(0,b.jsxs)("div",{className:"rounded-md -space-y-px",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"email",className:"sr-only",children:"邮箱地址"}),(0,b.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"邮箱地址",value:f,onChange:a=>g(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"password",className:"sr-only",children:"密码"}),(0,b.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"密码",value:h,onChange:a=>i(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900",children:"记住我"})]}),(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsx)(c.default,{href:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"忘记密码？"})})]}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors disabled:opacity-70 disabled:cursor-not-allowed",children:l?"登录中...":"登录"})})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=_0722bf3e._.js.map