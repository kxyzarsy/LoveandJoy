(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},18566,(e,t,s)=>{t.exports=e.r(76562)},89001,e=>{"use strict";let t="admin_",s=e=>{try{let s=`${t}${e}`,r=localStorage.getItem(s);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}}catch(e){return console.error("获取管理员状态失败:",e),null}},r=(e,s)=>{try{let r=`${t}${e}`;localStorage.setItem(r,JSON.stringify(s)),window.dispatchEvent(new Event("adminStateChanged"))}catch(e){console.error("设置管理员状态失败:",e)}},a=()=>{try{for(let e=localStorage.length-1;e>=0;e--){let s=localStorage.key(e);s&&s.startsWith(t)&&localStorage.removeItem(s)}window.dispatchEvent(new Event("adminStateChanged"))}catch(e){console.error("清除所有管理员状态失败:",e)}};e.s(["adminAuth",0,{isAuthenticated:()=>!0===s("isLoggedIn"),getCurrentUser:()=>s("user"),login:(e,t)=>{console.log("Admin token from API:",t),r("isLoggedIn",!0),r("user",e),r("token",t),console.log("Stored admin token:",s("token"))},logout:()=>{a()}},"getAdminHeaders",0,()=>{let e=s("token");return(e&&e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1)),e&&(e=>{try{let t=JSON.parse(atob(e.split(".")[1])),s=1e3*t.exp;return Date.now()>s}catch(e){return!0}})(e))?(a(),window.dispatchEvent(new Event("adminStateChanged")),window.location.href="/admin/secret-login",{"Content-Type":"application/json"}):{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}},"listenToAdminStateChanges",0,e=>(window.addEventListener("adminStateChanged",e),()=>{window.removeEventListener("adminStateChanged",e)})])},93179,e=>{"use strict";let t=["骚","贱","傻逼","操","fuck","shit","政治敏感词1","政治敏感词2","色情敏感词1","色情敏感词2"],s=e=>{let s=[];return t.forEach(t=>{RegExp(t,"gi").test(e)&&s.push(t)}),s};e.s(["detectSensitiveWords",0,s,"hasSensitiveWords",0,e=>s(e).length>0])},79698,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(93179),o=e.i(89001);function l({isOpen:e,onClose:l,isAdmin:n=!1}){let i=(0,r.useRouter)(),[d,c]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[x,u]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[v,f]=(0,s.useState)(!1),[j,b]=(0,s.useState)(""),[w,y]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[_,L]=(0,s.useState)(!1),[S,C]=(0,s.useState)(""),[M,E]=(0,s.useState)(!1),[z,T]=(0,s.useState)(!1),[B,W]=(0,s.useState)(!1),[I,O]=(0,s.useState)(0),[q,D]=(0,s.useState)(!1),[A,$]=(0,s.useState)("idle"),[F,V]=(0,s.useState)("");(0,s.useEffect)(()=>{e||J()},[e]),(0,s.useEffect)(()=>{if(e){let e=localStorage.getItem("blogDraft");if(e)try{let t=JSON.parse(e);c(t.title||""),m(t.excerpt||""),u(t.content||""),p(t.image||"")}catch(e){console.error("Failed to load draft:",e)}}},[e]);let J=()=>{c(""),m(""),u(""),p(""),f(!1),b(""),C(""),y(!1),k(!1),L(!1),E(!1),T(!1),W(!1),O(0),D(!1),$("idle"),V("")},H=async e=>{let t=e.target.files?.[0];if(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type)){$("error"),V("不支持的文件类型，请上传JPG、PNG或GIF格式的图片");return}if(t.size>5242880){$("error"),V("文件大小超过限制，请上传小于5MB的图片");return}$("uploading"),O(0);try{let e=new FormData;e.append("file",t);let s=await fetch("/api/upload",{method:"POST",body:e});if(!s.ok)throw Error("上传失败");let r=await s.json();p(r.url),$("success"),V("图片上传成功"),O(100)}catch(e){$("error"),V(e.message||"文件上传失败，请稍后重试")}}},P=async e=>{e.preventDefault(),f(!0),b(""),C(""),y(!1),k(!1),L(!1),E(!1);try{if(d&&h&&x){let e=`${d} ${h} ${x}`,t=(0,a.hasSensitiveWords)(e);(0,a.detectSensitiveWords)(e);let s=1,r={"Content-Type":"application/json"};if(n){let e=o.adminAuth.getCurrentUser();e&&(s=e.id),r=(0,o.getAdminHeaders)()}else s=JSON.parse(localStorage.getItem("user")||"{}").id||1;let c={title:d,excerpt:h,content:x,image:g,categoryId:1,authorId:s,readTime:Math.ceil(x.length/500)},m=await fetch("/api/posts",{method:"POST",headers:r,body:JSON.stringify(c)});if(!m.ok){let e=await m.json().catch(()=>({}));throw Error(e.error||"发布文章失败")}let u=await m.json();E(!0),L(t),setTimeout(()=>{C("文章已成功发布"),t&&k(!0),setTimeout(()=>{l(),n?i.push("/admin/posts"):t?i.push("/users/1"):i.push(`/posts/${u.id}`)},3e3)},2e3)}else b("请填写所有必填字段")}catch(e){b(e.message||"发布文章失败，请重试")}finally{f(!1)}};return e?(0,t.jsxs)("div",{className:"fixed inset-0 bg-gradient-to-br from-gray-900/80 to-indigo-900/80 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:[M&&(0,t.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-500 opacity-30 animate-ping",style:{width:"200px",height:"200px",animationDuration:"2s"}}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-500 opacity-20 animate-ping",style:{width:"200px",height:"200px",animationDuration:"2s",animationDelay:"0.3s"}}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-full bg-blue-500 opacity-10 animate-ping",style:{width:"200px",height:"200px",animationDuration:"2s",animationDelay:"0.6s"}}),(0,t.jsx)("div",{className:"relative w-24 h-24 bg-white rounded-full flex items-center justify-center animate-scale shadow-lg",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),B&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transition-all duration-300 transform scale-100",children:(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"操作失败"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"未检测到文件键入，无法存入草稿箱"}),(0,t.jsx)("button",{onClick:()=>W(!1),className:"w-full px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm font-medium transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5",children:"确定"})]})})}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto transition-all duration-300 transform scale-100 hover:shadow-3xl",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-5 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-2xl",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),n?"发布新文章":"发布作品"]}),(0,t.jsx)("button",{onClick:l,disabled:v,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed p-2 rounded-full hover:bg-gray-100 transition-all duration-200",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"px-6 py-4",children:[j&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{children:j})]}),S&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:S})]}),N&&(0,t.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-yellow-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,t.jsx)("span",{children:"该文章含有违禁词，需要通过审核才能正常发布"})]}),(0,t.jsxs)("form",{className:"space-y-4",onSubmit:P,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:["文章标题 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"title",value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"请输入文章标题"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"excerpt",className:"block text-sm font-medium text-gray-700 mb-1",children:["文章摘要 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{id:"excerpt",value:h,onChange:e=>m(e.target.value),rows:3,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"请输入文章摘要"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:["文章内容 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{id:"content",value:x,onChange:e=>u(e.target.value),rows:8,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-transparent resize-none transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"请输入文章内容"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"文章图片"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",id:"image",value:g,onChange:e=>p(e.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-3 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md",placeholder:"请输入图片 URL 或本地路径"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{document.getElementById("image-upload").click()},disabled:q,className:"px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 flex items-center gap-2 whitespace-nowrap",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"上传图片"]})]}),(0,t.jsx)("input",{type:"file",id:"image-upload",accept:"image/jpeg,image/png,image/gif",onChange:H,className:"hidden"}),"uploading"===A&&(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,t.jsx)("span",{children:"上传进度"}),(0,t.jsxs)("span",{children:[I,"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:`${I}%`}})})]}),"success"===A&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{className:"text-sm",children:F})]}),"error"===A&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm",children:[(0,t.jsx)("svg",{className:"w-4 h-4 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"text-sm",children:F})]})]})]}),z&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4 flex items-center gap-2 shadow-sm animate-fade-in",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-green-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{children:"已存入草稿箱，仅支持本地存储"})]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4 pt-4 border-t border-gray-100",children:[(0,t.jsx)("button",{type:"button",onClick:l,disabled:v,className:"px-6 py-3.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md",children:"取消"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{if(!d.trim()&&!h.trim()&&!x.trim()&&!g.trim())return void W(!0);let e={title:d,excerpt:h,content:x,image:g,savedAt:new Date().toISOString()};localStorage.setItem("blogDraft",JSON.stringify(e)),T(!0),setTimeout(()=>T(!1),3e3)},disabled:v,className:"px-6 py-3.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"存入草稿箱"]}),(0,t.jsx)("button",{type:"submit",disabled:v,className:"px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-sm hover:shadow-md hover:-translate-y-0.5 flex items-center gap-2",children:v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"发布中..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"发布文章"]})})]})]})]})]})]}):null}e.s(["default",()=>l])},58195,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(79698);function a(){let[e,a]=(0,s.useState)(!1),[o,l]=(0,s.useState)({id:1,name:"博主",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop"}),[n,i]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),h=()=>{a("true"===localStorage.getItem("isLoggedIn")),l(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{id:1,name:"博主",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop"}),c(window.location.pathname.startsWith("/admin"))};return(0,s.useEffect)(()=>{h();let e=()=>{h()},t=()=>{h()},s=()=>{h()};return window.addEventListener("storage",e),window.addEventListener("popstate",t),window.addEventListener("userLoggedIn",s),window.addEventListener("userLoggedOut",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("popstate",t),window.removeEventListener("userLoggedIn",s),window.removeEventListener("userLoggedOut",e)}},[]),o.name,(0,t.jsxs)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("a",{href:"/",className:"text-2xl font-bold text-gray-900",children:"我的博客"})}),!d&&(0,t.jsxs)("nav",{className:"hidden md:flex space-x-4 items-center",children:[(0,t.jsx)("a",{href:"/all-posts",className:"text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"全部文章"}),(0,t.jsx)("a",{href:"/about",className:"text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"关于"})]}),!d&&(0,t.jsx)("div",{className:"flex items-center space-x-4",children:e?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{className:"flex items-center space-x-2 focus:outline-none",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden border-2 border-blue-100",children:(0,t.jsx)("img",{src:o.avatar,alt:o.name,className:"w-full h-full object-cover"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 hidden md:inline",children:o.name})]}),(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 origin-top-right z-50",children:[(0,t.jsx)("a",{href:`/users/${o.id}`,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"个人主页"}),(0,t.jsx)("button",{onClick:()=>i(!0),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"发布文章"}),(0,t.jsx)("button",{onClick:async()=>{try{localStorage.removeItem("isLoggedIn"),localStorage.removeItem("user"),localStorage.removeItem("posts"),h(),window.location.href="/login"}catch(e){console.error("退出登录失败:",e),alert("退出登录失败，请重试")}},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"退出登录"})]})]})}):(0,t.jsx)("a",{href:"/login",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"登录"})})]}),!d&&(0,t.jsx)("div",{className:"md:hidden flex items-center justify-between",children:(0,t.jsx)("button",{className:"text-gray-700 hover:text-blue-600 focus:outline-none",children:(0,t.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})})]}),(0,t.jsx)(r.default,{isOpen:n,onClose:()=>i(!1),isAdmin:d})]})}e.s(["default",()=>a])},18315,e=>{"use strict";var t=e.i(43476),s=e.i(71645);class r extends s.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error:",e,t)}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null}),window.location.reload()};render(){return this.state.hasError?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-8",children:(0,t.jsx)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-md overflow-hidden",children:(0,t.jsx)("div",{className:"bg-red-50 p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"抱歉，出现了错误"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:this.state.error?.message||"系统遇到了意外情况，请稍后重试"}),(0,t.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,t.jsx)("button",{onClick:this.handleReset,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"刷新页面"}),(0,t.jsx)("button",{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-lg transition-colors",children:"返回首页"})]})]})})})}):this.props.children}}e.s(["default",()=>r])},91310,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.s(["default",0,()=>{let[e,r]=(0,s.useState)(null),[a,o]=(0,s.useState)(!0),[l,n]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{n(window.location.pathname.startsWith("/admin"))},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/footer-config");if(e.ok){let t=await e.json();"string"==typeof t.quick_links&&(t.quick_links=JSON.parse(t.quick_links)),t.quick_links||(t.quick_links=[]);let s={...t,site_title:t.site_title||"",site_description:t.site_description||"",email:t.email||"",phone:t.phone||"",address:t.address||"",social_facebook:t.social_facebook||"",social_twitter:t.social_twitter||"",social_instagram:t.social_instagram||"",social_github:t.social_github||"",social_linkedin:t.social_linkedin||"",copyright_text:t.copyright_text||""};r(s)}}catch(e){console.error("获取页尾配置失败:",e)}finally{o(!1)}})()},[]),l)return null;if(a||!e)return(0,t.jsx)("footer",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-t border-blue-100 py-12",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-8",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"我的博客"}),(0,t.jsx)("p",{className:"text-gray-600",children:"分享技术见解、生活感悟和学习心得，记录成长的每一步。"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"联系我们"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"flex items-start",children:(0,t.jsx)("p",{className:"text-gray-600",children:"contact@example.com"})}),(0,t.jsx)("div",{className:"flex items-start",children:(0,t.jsx)("p",{className:"text-gray-600",children:"+86 123 4567 8910"})})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:"快捷链接"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("a",{href:"/",className:"text-gray-600 hover:text-blue-600",children:"首页"}),(0,t.jsx)("a",{href:"/all-posts",className:"text-gray-600 hover:text-blue-600",children:"全部文章"}),(0,t.jsx)("a",{href:"/about",className:"text-gray-600 hover:text-blue-600",children:"关于我们"}),(0,t.jsx)("a",{href:"#",className:"text-gray-600 hover:text-blue-600",children:"隐私政策"})]})]})]}),(0,t.jsx)("div",{className:"pt-8 border-t border-blue-100 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["© ",new Date().getFullYear()," 我的博客. 保留所有权利."]})})]})});let i=e.copyright_text.replace("{year}",new Date().getFullYear().toString()),d={backgroundColor:e.background_color,color:e.text_color,fontSize:e.font_size,borderTopColor:e.border_color},c={color:e.link_color};return e.link_hover_color,(0,t.jsx)("footer",{className:"border-t py-12 transition-all duration-300",style:d,children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,t.jsxs)("div",{className:`grid grid-cols-1 gap-8 mb-8 ${2===e.layout_columns?"md:grid-cols-2":3===e.layout_columns?"md:grid-cols-3":"md:grid-cols-4"}`,children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold flex items-center",children:[(0,t.jsx)("span",{className:"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center mr-2",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),e.site_title]}),e.site_description&&(0,t.jsx)("p",{className:"leading-relaxed",children:e.site_description}),e.show_social_media&&(0,t.jsxs)("div",{className:"flex space-x-4",children:[e.social_facebook&&(0,t.jsx)("a",{href:e.social_facebook,className:"transition-all duration-300 transform hover:-translate-y-1",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.social_twitter&&(0,t.jsx)("a",{href:e.social_twitter,className:"transition-all duration-300 transform hover:-translate-y-1",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),e.social_instagram&&(0,t.jsx)("a",{href:e.social_instagram,className:"transition-all duration-300 transform hover:-translate-y-1",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),e.social_github&&(0,t.jsx)("a",{href:e.social_github,className:"transition-all duration-300 transform hover:-translate-y-1",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}),e.social_linkedin&&(0,t.jsx)("a",{href:e.social_linkedin,className:"transition-all duration-300 transform hover:-translate-y-1",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"})})})]})]}),e.show_contact_info&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"联系我们"}),(0,t.jsxs)("div",{className:"space-y-3",children:[e.email&&(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"bg-blue-100 rounded-full p-2 text-blue-600 mr-3 mt-0.5",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"邮箱地址"}),(0,t.jsx)("a",{href:`mailto:${e.email}`,className:"transition-colors",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:e.email})]})]}),e.phone&&(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"bg-blue-100 rounded-full p-2 text-blue-600 mr-3 mt-0.5",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"联系电话"}),(0,t.jsx)("a",{href:`tel:${e.phone}`,className:"transition-colors",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:e.phone})]})]}),e.address&&(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"bg-blue-100 rounded-full p-2 text-blue-600 mr-3 mt-0.5",children:(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"办公地址"}),(0,t.jsx)("p",{children:e.address})]})]})]})]}),e.show_quick_links&&e.quick_links&&e.quick_links.length>0&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"快捷链接"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:e.quick_links.map((s,r)=>(0,t.jsxs)("a",{href:s.url,className:"transition-all duration-200 flex items-center gap-2 group",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:[(0,t.jsx)("svg",{className:"w-4 h-4 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),s.text]},r))})]})]}),e.show_copyright&&(0,t.jsx)("div",{className:"pt-8 border-t",style:{borderTopColor:e.border_color},children:(0,t.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-4 text-center",children:[(0,t.jsx)("p",{children:i}),e.quick_links&&e.quick_links.length>0&&(0,t.jsx)("div",{className:"flex items-center gap-2",children:e.quick_links.slice(0,3).map((r,a)=>(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)("a",{href:r.url,className:"transition-colors",style:c,onMouseEnter:t=>t.currentTarget.style.color=e.link_hover_color,onMouseLeave:t=>t.currentTarget.style.color=e.link_color,children:r.text}),a<2&&(0,t.jsx)("span",{className:"text-gray-400",children:"|"})]},a))})]})})]})})}])}]);