(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={assign:function(){return i},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return l}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});function n(e){let t={};for(let[r,s]of e.entries()){let e=t[r];void 0===e?t[r]=s:Array.isArray(e)?e.push(s):t[r]=[e,s]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.append(r,o(e));else t.set(r,o(s));return t}function i(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,s]of r.entries())e.append(t,s)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={formatUrl:function(){return l},formatWithValidation:function(){return d},urlObjectKeys:function(){return i}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(90809)._(e.r(98183)),o=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,s=e.protocol||"",a=e.pathname||"",l=e.hash||"",i=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:r&&(d=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(d+=":"+e.port)),i&&"object"==typeof i&&(i=String(n.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return s&&!s.endsWith(":")&&(s+=":"),e.slashes||(!s||o.test(s))&&!1!==d?(d="//"+(d||""),a&&"/"!==a[0]&&(a="/"+a)):d||(d=""),l&&"#"!==l[0]&&(l="#"+l),c&&"?"!==c[0]&&(c="?"+c),a=a.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${s}${d}${a}${c}${l}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return l(e)}},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=e.r(71645);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return j},NormalizeError:function(){return b},PageNotFoundError:function(){return y},SP:function(){return h},ST:function(){return p},WEB_VITALS:function(){return n},execOnce:function(){return o},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return m},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return w}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...s)=>(r||(r=!0,t=e(...s)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>l.test(e);function d(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let s=await e.getInitialProps(t);if(r&&m(r))return s;if(!s)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${s}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return s}let h="undefined"!=typeof performance,p=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class y extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let s=e.r(18967),a=e.r(52817);function n(e){if(!(0,s.isAbsoluteUrl)(e))return!0;try{let t=(0,s.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s={default:function(){return g},useLinkStatus:function(){return y}};for(var a in s)Object.defineProperty(r,a,{enumerable:!0,get:s[a]});let n=e.r(90809),o=e.r(43476),l=n._(e.r(71645)),i=e.r(95057),d=e.r(8372),c=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let f=e.r(91949),x=e.r(73668),h=e.r(9396);function p(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function g(t){var r;let s,a,n,[i,g]=(0,l.useOptimistic)(f.IDLE_LINK_STATUS),y=(0,l.useRef)(null),{href:j,as:v,children:w,prefetch:N=null,passHref:S,replace:k,shallow:C,scroll:P,onClick:I,onMouseEnter:O,onTouchStart:E,legacyBehavior:$=!1,onNavigate:_,ref:T,unstable_dynamicOnHover:L,...U}=t;s=w,$&&("string"==typeof s||"number"==typeof s)&&(s=(0,o.jsx)("a",{children:s}));let M=l.default.useContext(d.AppRouterContext),R=!1!==N,D=!1!==N?null===(r=N)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:A,as:F}=l.default.useMemo(()=>{let e=p(j);return{href:e,as:v?p(v):e}},[j,v]);if($){if(s?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=l.default.Children.only(s)}let z=$?a&&"object"==typeof a&&a.ref:T,B=l.default.useCallback(e=>(null!==M&&(y.current=(0,f.mountLinkInstance)(e,A,M,D,R,g)),()=>{y.current&&((0,f.unmountLinkForCurrentNavigation)(y.current),y.current=null),(0,f.unmountPrefetchableInstance)(e)}),[R,A,M,D,g]),J={ref:(0,c.useMergedRef)(B,z),onClick(t){$||"function"!=typeof I||I(t),$&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!M||t.defaultPrevented||function(t,r,s,a,n,o,i){if("undefined"!=typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);l.default.startTransition(()=>{u(s||r,n?"replace":"push",o??!0,a.current)})}}(t,A,F,y,k,P,_)},onMouseEnter(e){$||"function"!=typeof O||O(e),$&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),M&&R&&(0,f.onNavigationIntent)(e.currentTarget,!0===L)},onTouchStart:function(e){$||"function"!=typeof E||E(e),$&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),M&&R&&(0,f.onNavigationIntent)(e.currentTarget,!0===L)}};return(0,u.isAbsoluteUrl)(F)?J.href=F:$&&!S&&("a"!==a.type||"href"in a.props)||(J.href=(0,m.addBasePath)(F)),n=$?l.default.cloneElement(a,J):(0,o.jsx)("a",{...U,...J,children:s}),(0,o.jsx)(b.Provider,{value:i,children:n})}e.r(84508);let b=(0,l.createContext)(f.IDLE_LINK_STATUS),y=()=>(0,l.useContext)(b);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},60065,e=>{"use strict";var t=e.i(43476),r=e.i(22016),s=e.i(71645),a=e.i(79698);let n=[{id:1,name:"技术",slug:"tech"},{id:2,name:"生活",slug:"life"},{id:3,name:"学习",slug:"study"},{id:4,name:"工作",slug:"work"}];function o({params:e}){let o=parseInt((0,s.use)(e).id),[l,i]=(0,s.useState)(null),[d,c]=(0,s.useState)([]),[u,m]=(0,s.useState)(0),[f,x]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),[g,b]=(0,s.useState)(!1),[y,j]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[N,S]=(0,s.useState)(""),[k,C]=(0,s.useState)(""),[P,I]=(0,s.useState)(!1),[O,E]=(0,s.useState)(!1),[$,_]=(0,s.useState)(0),[T,L]=(0,s.useState)({}),[U,M]=(0,s.useState)(""),[R,D]=(0,s.useState)(!1),[A,F]=(0,s.useState)(""),[z,B]=(0,s.useState)(""),[J,K]=(0,s.useState)(""),[G,V]=(0,s.useState)(""),[H,W]=(0,s.useState)(""),[X,Z]=(0,s.useState)(!1),[Q,q]=(0,s.useState)(!1),[Y,ee]=(0,s.useState)(!1),[et,er]=(0,s.useState)({}),[es,ea]=(0,s.useState)(""),[en,eo]=(0,s.useState)(0),[el,ei]=(0,s.useState)(!0),[ed,ec]=(0,s.useState)(!1),[eu,em]=(0,s.useState)(!1),[ef,ex]=(0,s.useState)(null),eh=async e=>{if(e.preventDefault(),L({}),M(""),!l)return void L({submit:"用户信息未加载"});let t={};if(y.trim()||(t.oldPassword="请输入旧密码"),v.trim()?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(v)||(t.newPassword="新密码至少需要8位，包含大小写字母、数字和特殊符号"):t.newPassword="请输入新密码",N.trim()?v!==N&&(t.confirmPassword="两次输入的密码不一致"):t.confirmPassword="请确认新密码","管理员"!==l.name&&(k.trim()?O||(t.verificationCode="请先发送验证码"):t.verificationCode="请输入邮箱验证码"),Object.keys(t).length>0)return void L(t);if("管理员"!==l.name)try{let e=await fetch(`/api/auth/send-verification-code?email=${encodeURIComponent(l.email)}&code=${encodeURIComponent(k)}`,{method:"GET"}),t=await e.json();if(!t.success)return void L(e=>({...e,verificationCode:t.message}))}catch(e){console.error("验证验证码失败:",e),L(e=>({...e,verificationCode:"验证码验证失败，请稍后重试"}));return}try{let e=await fetch(`/api/users/${o}/password`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":o.toString()},body:JSON.stringify({oldPassword:y,newPassword:v})}),t=await e.json();if(!e.ok)throw Error(t.message||"密码修改失败");j(""),w(""),S(""),C(""),E(!1),_(0),M("密码修改成功"),setTimeout(()=>{p(!1),M("")},3e3)}catch(e){L(t=>({...t,submit:e.message||"密码修改失败，请稍后重试"}))}},ep=async e=>{let t=e.target.files?.[0];if(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type))return void er(e=>({...e,avatar:"不支持的文件类型，请上传JPG、PNG或GIF格式的图片"}));if(t.size>2097152)return void er(e=>({...e,avatar:"文件大小超过限制，请上传小于2MB的图片"}));Z(!0);try{let e=new FormData;e.append("file",t);let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"头像上传失败")}let s=await r.json();V(s.url),er(e=>({...e,avatar:""}))}catch(e){er(t=>({...t,avatar:e.message||"头像上传失败，请稍后重试"}))}finally{Z(!1),e.target.value=""}}},eg=async e=>{let t=e.target.files?.[0];if(t){if(!["image/jpeg","image/png","image/gif"].includes(t.type))return void er(e=>({...e,backgroundImage:"不支持的文件类型，请上传JPG、PNG或GIF格式的图片"}));if(t.size>5242880)return void er(e=>({...e,backgroundImage:"文件大小超过限制，请上传小于5MB的图片"}));q(!0);try{let e=new FormData;e.append("file",t);let r=await fetch("/api/upload",{method:"POST",body:e});if(!r.ok){let e=await r.json().catch(()=>({}));throw Error(e.error||"背景图上传失败")}let s=await r.json();W(s.url),er(e=>({...e,backgroundImage:""}))}catch(e){er(t=>({...t,backgroundImage:e.message||"背景图上传失败，请稍后重试"}))}finally{q(!1),e.target.value=""}}},eb=async e=>{if(e.preventDefault(),er({}),ea(""),!l)return void er({submit:"用户信息未加载"});let t={};A&&A.trim()||(t.name="请输入用户名"),z&&z.trim()?/^[a-zA-Z0-9_]{3,20}$/.test(z)||(t.usernameId="用户名ID只能包含字母、数字和下划线，长度为3-20个字符"):t.usernameId="请输入用户名ID";let r=l.usernameId!==z;if(r&&!el&&(t.usernameId=`用户名ID只能每720小时修改一次，还需等待${en}小时`),Object.keys(t).length>0)return void er(t);if(r){em(!0),ec(!0);return}await ej()},ey=async()=>{ec(!1),await ej()},ej=async()=>{ee(!0);try{let e=await fetch(`/api/users/${o}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":o.toString()},body:JSON.stringify({name:A,usernameId:z,bio:J,avatar:G,backgroundImage:H})});if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"更新失败")}let t=await e.json();i(t),eo(t.remainingUsernameChangeHours),ei(0===t.remainingUsernameChangeHours);let r=JSON.parse(localStorage.getItem("user")||"null");r&&r.id===o&&localStorage.setItem("user",JSON.stringify(t)),ea("个人信息更新成功"),setTimeout(()=>{D(!1),ea(""),em(!1)},3e3)}catch(e){er(t=>({...t,submit:e.message||"更新失败，请稍后重试"})),em(!1)}finally{ee(!1)}},ev=async()=>{if(!P&&!($>0)&&l){I(!0);try{let e=await fetch("/api/auth/send-verification-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email})}),t=await e.json();if(t.success){E(!0),_(60);let e=setInterval(()=>{_(t=>t<=1?(clearInterval(e),0):t-1)},1e3)}else L(e=>({...e,verificationCode:t.message||"验证码发送失败，请稍后重试"}))}catch(e){console.error("发送验证码失败:",e),L(e=>({...e,verificationCode:"验证码发送失败，请稍后重试"}))}finally{I(!1)}}};return((0,s.useEffect)(()=>{(async()=>{x(!0);try{let e=await fetch(`/api/users/${o}`);if(!e.ok)throw Error("Failed to fetch user data");let t=await e.json(),r={...t,usernameId:t.usernameId||`user${o}`,backgroundImage:t.backgroundImage||"",role:t.role||"user",lastLoginAt:t.lastLoginAt||null,lastUsernameChange:t.lastUsernameChange||null};i(r),eo(0),ei(!0);let s=JSON.parse(localStorage.getItem("user")||"null");s&&s.id===o&&localStorage.setItem("user",JSON.stringify(r));let a=await fetch("/api/posts");if(!a.ok)throw Error("Failed to fetch posts");let n=(await a.json()).filter(e=>e.authorId===o);c(n),m(n.length)}catch(e){console.error("Error loading data:",e),i(null),c([]),m(0)}finally{x(!1)}})()},[o]),(0,s.useEffect)(()=>(en>0&&!1===el&&ex(setInterval(()=>{eo(e=>e<=1?(ei(!0),0):e-1)},36e5)),()=>{ef&&clearInterval(ef)}),[en,el]),f)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):l?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,t.jsx)("div",{className:"h-32 relative",children:l.backgroundImage?(0,t.jsx)("img",{src:l.backgroundImage,alt:"背景图",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600"})}),(0,t.jsx)("div",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center",children:[(0,t.jsx)("div",{className:"-mt-16 mr-6",children:(0,t.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg",children:(0,t.jsx)("img",{src:l.avatar||"https://via.placeholder.com/200",alt:l.name,className:"w-full h-full object-cover"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:l.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["@",l.usernameId]})]}),(0,t.jsxs)("div",{className:"mt-4 md:mt-0 flex gap-3",children:[(0,t.jsx)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"关注"}),o===l.id&&(0,t.jsxs)("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})}),"发布文章"]}),o===l.id&&(0,t.jsxs)("button",{onClick:()=>{l&&(F(l.name||""),B(l.usernameId||""),K(l.bio||""),V(l.avatar||""),W(l.backgroundImage||""),er({}),ea(""),D(!0))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"编辑资料"]}),o===l.id&&(0,t.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,t.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{d:"M12 15v-2h3v-3h2v3h3v2h-3v3h-2v-3h-3z"}),(0,t.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z"})]}),"修改密码"]})]})]}),(0,t.jsx)("p",{className:"mt-3 text-gray-600",children:l.bio||"这个人很懒，还没有填写个人简介"}),(0,t.jsxs)("div",{className:"mt-4 flex space-x-8",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:u}),(0,t.jsx)("span",{className:"text-gray-500",children:"文章"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:0}),(0,t.jsx)("span",{className:"text-gray-500",children:"粉丝"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:0}),(0,t.jsx)("span",{className:"text-gray-500",children:"关注"})]})]}),(0,t.jsxs)("p",{className:"mt-3 text-sm text-gray-500",children:["注册于 ",new Date(l.createdAt).toLocaleDateString()]})]})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"发布的文章"})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:d.map(e=>{let s=(e=>{switch(e){case"published":return{text:"已发布",className:"bg-green-100 text-green-800"};case"pending":return{text:"审核中",className:"bg-yellow-100 text-yellow-800"};case"rejected":return{text:"未通过",className:"bg-red-100 text-red-800"};default:return{text:"未知",className:"bg-gray-100 text-gray-800"}}})(e.status),a=n.find(t=>t.id===e.categoryId)||{name:"未分类"};return(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[e.image&&(0,t.jsx)("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:(0,t.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,t.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full mr-3",children:a.name}),(0,t.jsx)("span",{className:`text-xs font-medium px-3 py-1 rounded-full mr-3 ${s.className}`,children:s.text}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:(0,t.jsx)(r.default,{href:`/posts/${e.id}`,className:"hover:text-blue-600 transition-colors",children:e.title})}),(0,t.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.excerpt}),"rejected"===e.status&&e.rejectionReason&&(0,t.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-100 rounded-md",children:(0,t.jsxs)("p",{className:"text-sm text-red-700",children:[(0,t.jsx)("strong",{children:"未通过原因:"})," ",e.rejectionReason]})})]})]})},e.id)})}),0===d.length&&(0,t.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,t.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,t.jsx)("p",{className:"text-gray-500",children:"该用户还没有发布任何文章"})]})]}),h&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"修改密码"}),(0,t.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"px-6 py-6",children:[U&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md mb-4",children:U}),(0,t.jsxs)("form",{className:"space-y-4",onSubmit:eh,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"oldPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"旧密码"}),(0,t.jsx)("input",{type:"password",id:"oldPassword",value:y,onChange:e=>j(e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${T.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"请输入旧密码"}),T.oldPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.oldPassword})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"新密码"}),(0,t.jsx)("input",{type:"password",id:"newPassword",value:v,onChange:e=>w(e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${T.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"请输入新密码"}),T.newPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.newPassword})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"确认新密码"}),(0,t.jsx)("input",{type:"password",id:"confirmPassword",value:N,onChange:e=>S(e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${T.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"请再次输入新密码"}),T.confirmPassword&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.confirmPassword})]}),"管理员"!==l.name&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱验证码"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",id:"verificationCode",value:k,onChange:e=>C(e.target.value),className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${T.verificationCode?"border-red-500":"border-gray-300"}`,placeholder:"请输入邮箱验证码"}),(0,t.jsx)("button",{type:"button",onClick:ev,disabled:P||$>0,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${P||$>0?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:P?"发送中...":$>0?`${$}s后重试`:"发送验证码"})]}),T.verificationCode&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:T.verificationCode})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"确认修改"})]})]})]})]})}),R&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"编辑个人信息"}),(0,t.jsx)("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"px-6 py-6",children:[es&&(0,t.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md mb-4",children:es}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:eb,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"头像"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-gray-200",children:(0,t.jsx)("img",{src:G,alt:"头像预览",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",id:"avatarUpload",accept:"image/jpeg,image/png,image/gif",onChange:ep,className:"hidden"}),(0,t.jsx)("button",{type:"button",onClick:()=>document.getElementById("avatarUpload")?.click(),disabled:X,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${X?"bg-gray-400 cursor-not-allowed":""}`,children:X?"上传中...":"上传头像"}),et.avatar&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:et.avatar})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"背景图"}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"h-32 rounded-lg overflow-hidden border-2 border-gray-200",children:(0,t.jsx)("img",{src:H||"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&h=200&fit=crop",alt:"背景图预览",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"file",id:"backgroundUpload",accept:"image/jpeg,image/png,image/gif",onChange:eg,className:"hidden"}),(0,t.jsx)("button",{type:"button",onClick:()=>document.getElementById("backgroundUpload")?.click(),disabled:Q,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${Q?"bg-gray-400 cursor-not-allowed":""}`,children:Q?"上传中...":"上传背景图"}),et.backgroundImage&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:et.backgroundImage})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"editName",className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名"}),(0,t.jsx)("input",{type:"text",id:"editName",value:A,onChange:e=>F(e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${et.name?"border-red-500":"border-gray-300"}`,placeholder:"请输入用户名"}),et.name&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:et.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"editUsernameId",className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名ID"}),(0,t.jsx)("input",{type:"text",id:"editUsernameId",value:z,onChange:e=>B(e.target.value),disabled:!el,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${et.usernameId?"border-red-500":"border-gray-300"} ${!el?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"请输入用户名ID"}),et.usernameId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:et.usernameId}),!el&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-yellow-600",children:["用户名ID只能每720小时修改一次，还需等待：",en,"小时"]}),el&&(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"用户名ID每720小时可修改一次"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"editBio",className:"block text-sm font-medium text-gray-700 mb-1",children:"个人简介"}),(0,t.jsx)("textarea",{id:"editBio",value:J,onChange:e=>K(e.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"请输入个人简介"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,t.jsx)("button",{type:"submit",disabled:Y,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${Y?"bg-gray-400 cursor-not-allowed":""}`,children:Y?"保存中...":"保存修改"})]})]})]})]})}),ed&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"确认修改用户名ID"})}),(0,t.jsxs)("div",{className:"px-6 py-6",children:[(0,t.jsxs)("p",{className:"text-gray-600 mb-4",children:["您确定要将用户名ID从 ",(0,t.jsxs)("strong",{children:["@",l.usernameId]})," 修改为 ",(0,t.jsxs)("strong",{children:["@",z]})," 吗？"]}),(0,t.jsx)("p",{className:"text-yellow-600 text-sm mb-6",children:"注意：用户名ID修改后，您将需要等待720小时才能再次修改。"}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{ec(!1),em(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,t.jsx)("button",{type:"button",onClick:ey,disabled:Y,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${Y?"bg-gray-400 cursor-not-allowed":""}`,children:Y?"确认中...":"确认修改"})]})]})]})}),(0,t.jsx)(a.default,{isOpen:g,onClose:()=>b(!1),isAdmin:!1})]}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center max-w-md",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"用户不存在"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"抱歉，您访问的用户不存在。"}),(0,t.jsx)(r.default,{href:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"返回首页"})]})})}e.s(["default",()=>o])}]);