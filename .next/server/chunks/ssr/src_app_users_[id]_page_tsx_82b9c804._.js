module.exports=[82277,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131),e=a.i(30774);let f=[{id:1,name:"技术",slug:"tech"},{id:2,name:"生活",slug:"life"},{id:3,name:"学习",slug:"study"},{id:4,name:"工作",slug:"work"}];function g({params:a}){let g=parseInt((0,d.use)(a).id),[h,i]=(0,d.useState)(null),[j,k]=(0,d.useState)([]),[l,m]=(0,d.useState)(0),[n,o]=(0,d.useState)(!0),[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)(!1),[t,u]=(0,d.useState)(""),[v,w]=(0,d.useState)(""),[x,y]=(0,d.useState)(""),[z,A]=(0,d.useState)(""),[B,C]=(0,d.useState)(!1),[D,E]=(0,d.useState)(!1),[F,G]=(0,d.useState)(0),[H,I]=(0,d.useState)({}),[J,K]=(0,d.useState)(""),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)(""),[P,Q]=(0,d.useState)(""),[R,S]=(0,d.useState)(""),[T,U]=(0,d.useState)(""),[V,W]=(0,d.useState)(""),[X,Y]=(0,d.useState)(!1),[Z,$]=(0,d.useState)(!1),[_,aa]=(0,d.useState)(!1),[ab,ac]=(0,d.useState)({}),[ad,ae]=(0,d.useState)(""),[af,ag]=(0,d.useState)(0),[ah,ai]=(0,d.useState)(!0),[aj,ak]=(0,d.useState)(!1),[al,am]=(0,d.useState)(!1),[an,ao]=(0,d.useState)(null),ap=async a=>{if(a.preventDefault(),I({}),K(""),!h)return void I({submit:"用户信息未加载"});let b={};if(t.trim()||(b.oldPassword="请输入旧密码"),v.trim()?/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(v)||(b.newPassword="新密码至少需要8位，包含大小写字母、数字和特殊符号"):b.newPassword="请输入新密码",x.trim()?v!==x&&(b.confirmPassword="两次输入的密码不一致"):b.confirmPassword="请确认新密码","管理员"!==h.name&&(z.trim()?D||(b.verificationCode="请先发送验证码"):b.verificationCode="请输入邮箱验证码"),Object.keys(b).length>0)return void I(b);if("管理员"!==h.name)try{let a=await fetch(`/api/auth/send-verification-code?email=${encodeURIComponent(h.email)}&code=${encodeURIComponent(z)}`,{method:"GET"}),b=await a.json();if(!b.success)return void I(a=>({...a,verificationCode:b.message}))}catch(a){console.error("验证验证码失败:",a),I(a=>({...a,verificationCode:"验证码验证失败，请稍后重试"}));return}try{let a=await fetch(`/api/users/${g}/password`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":g.toString()},body:JSON.stringify({oldPassword:t,newPassword:v})}),b=await a.json();if(!a.ok)throw Error(b.message||"密码修改失败");u(""),w(""),y(""),A(""),E(!1),G(0),K("密码修改成功"),setTimeout(()=>{q(!1),K("")},3e3)}catch(a){I(b=>({...b,submit:a.message||"密码修改失败，请稍后重试"}))}},aq=async a=>{let b=a.target.files?.[0];if(b){if(!["image/jpeg","image/png","image/gif"].includes(b.type))return void ac(a=>({...a,avatar:"不支持的文件类型，请上传JPG、PNG或GIF格式的图片"}));if(b.size>2097152)return void ac(a=>({...a,avatar:"文件大小超过限制，请上传小于2MB的图片"}));Y(!0);try{let a=new FormData;a.append("file",b);let c=await fetch("/api/upload",{method:"POST",body:a});if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.error||"头像上传失败")}let d=await c.json();U(d.url),ac(a=>({...a,avatar:""}))}catch(a){ac(b=>({...b,avatar:a.message||"头像上传失败，请稍后重试"}))}finally{Y(!1),a.target.value=""}}},ar=async a=>{let b=a.target.files?.[0];if(b){if(!["image/jpeg","image/png","image/gif"].includes(b.type))return void ac(a=>({...a,backgroundImage:"不支持的文件类型，请上传JPG、PNG或GIF格式的图片"}));if(b.size>5242880)return void ac(a=>({...a,backgroundImage:"文件大小超过限制，请上传小于5MB的图片"}));$(!0);try{let a=new FormData;a.append("file",b);let c=await fetch("/api/upload",{method:"POST",body:a});if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.error||"背景图上传失败")}let d=await c.json();W(d.url),ac(a=>({...a,backgroundImage:""}))}catch(a){ac(b=>({...b,backgroundImage:a.message||"背景图上传失败，请稍后重试"}))}finally{$(!1),a.target.value=""}}},as=async a=>{if(a.preventDefault(),ac({}),ae(""),!h)return void ac({submit:"用户信息未加载"});let b={};N&&N.trim()||(b.name="请输入用户名"),P&&P.trim()?/^[a-zA-Z0-9_]{3,20}$/.test(P)||(b.usernameId="用户名ID只能包含字母、数字和下划线，长度为3-20个字符"):b.usernameId="请输入用户名ID";let c=h.usernameId!==P;if(c&&!ah&&(b.usernameId=`用户名ID只能每720小时修改一次，还需等待${af}小时`),Object.keys(b).length>0)return void ac(b);if(c){am(!0),ak(!0);return}await au()},at=async()=>{ak(!1),await au()},au=async()=>{aa(!0);try{let a=await fetch(`/api/users/${g}`,{method:"PUT",headers:{"Content-Type":"application/json","X-User-Id":g.toString()},body:JSON.stringify({name:N,usernameId:P,bio:R,avatar:T,backgroundImage:V})});if(!a.ok){let b=await a.json().catch(()=>({}));throw Error(b.message||"更新失败")}let b=await a.json();i(b),ag(b.remainingUsernameChangeHours),ai(0===b.remainingUsernameChangeHours);let c=JSON.parse(localStorage.getItem("user")||"null");c&&c.id===g&&localStorage.setItem("user",JSON.stringify(b)),ae("个人信息更新成功"),setTimeout(()=>{M(!1),ae(""),am(!1)},3e3)}catch(a){ac(b=>({...b,submit:a.message||"更新失败，请稍后重试"})),am(!1)}finally{aa(!1)}},av=async()=>{if(!B&&!(F>0)&&h){C(!0);try{let a=await fetch("/api/auth/send-verification-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:h.email})}),b=await a.json();if(b.success){E(!0),G(60);let a=setInterval(()=>{G(b=>b<=1?(clearInterval(a),0):b-1)},1e3)}else I(a=>({...a,verificationCode:b.message||"验证码发送失败，请稍后重试"}))}catch(a){console.error("发送验证码失败:",a),I(a=>({...a,verificationCode:"验证码发送失败，请稍后重试"}))}finally{C(!1)}}};return((0,d.useEffect)(()=>{(async()=>{o(!0);try{let a=await fetch(`/api/users/${g}`);if(!a.ok)throw Error("Failed to fetch user data");let b=await a.json(),c={...b,usernameId:b.usernameId||`user${g}`,backgroundImage:b.backgroundImage||"",role:b.role||"user",lastLoginAt:b.lastLoginAt||null,lastUsernameChange:b.lastUsernameChange||null};i(c),ag(0),ai(!0);let d=JSON.parse(localStorage.getItem("user")||"null");d&&d.id===g&&localStorage.setItem("user",JSON.stringify(c));let e=await fetch("/api/posts");if(!e.ok)throw Error("Failed to fetch posts");let f=(await e.json()).filter(a=>a.authorId===g);k(f),m(f.length)}catch(a){console.error("Error loading data:",a),i(null),k([]),m(0)}finally{o(!1)}})()},[g]),(0,d.useEffect)(()=>(af>0&&!1===ah&&ao(setInterval(()=>{ag(a=>a<=1?(ai(!0),0):a-1)},36e5)),()=>{an&&clearInterval(an)}),[af,ah]),n)?(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h?(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,b.jsx)("div",{className:"h-32 relative",children:h.backgroundImage?(0,b.jsx)("img",{src:h.backgroundImage,alt:"背景图",className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600"})}),(0,b.jsx)("div",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center",children:[(0,b.jsx)("div",{className:"-mt-16 mr-6",children:(0,b.jsx)("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white shadow-lg",children:(0,b.jsx)("img",{src:h.avatar||"https://via.placeholder.com/200",alt:h.name,className:"w-full h-full object-cover"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:h.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:["@",h.usernameId]})]}),(0,b.jsxs)("div",{className:"mt-4 md:mt-0 flex gap-3",children:[(0,b.jsx)("button",{className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"关注"}),g===h.id&&(0,b.jsxs)("button",{onClick:()=>s(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})}),"发布文章"]}),g===h.id&&(0,b.jsxs)("button",{onClick:()=>{h&&(O(h.name||""),Q(h.usernameId||""),S(h.bio||""),U(h.avatar||""),W(h.backgroundImage||""),ac({}),ae(""),M(!0))},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"编辑资料"]}),g===h.id&&(0,b.jsxs)("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-md text-sm font-medium transition-colors flex items-center gap-2",children:[(0,b.jsxs)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{d:"M12 15v-2h3v-3h2v3h3v2h-3v3h-2v-3h-3z"}),(0,b.jsx)("path",{d:"M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12z"})]}),"修改密码"]})]})]}),(0,b.jsx)("p",{className:"mt-3 text-gray-600",children:h.bio||"这个人很懒，还没有填写个人简介"}),(0,b.jsxs)("div",{className:"mt-4 flex space-x-8",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:l}),(0,b.jsx)("span",{className:"text-gray-500",children:"文章"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:0}),(0,b.jsx)("span",{className:"text-gray-500",children:"粉丝"})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-gray-900 mr-1",children:0}),(0,b.jsx)("span",{className:"text-gray-500",children:"关注"})]})]}),(0,b.jsxs)("p",{className:"mt-3 text-sm text-gray-500",children:["注册于 ",new Date(h.createdAt).toLocaleDateString()]})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"发布的文章"})}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:j.map(a=>{let d=(a=>{switch(a){case"published":return{text:"已发布",className:"bg-green-100 text-green-800"};case"pending":return{text:"审核中",className:"bg-yellow-100 text-yellow-800"};case"rejected":return{text:"未通过",className:"bg-red-100 text-red-800"};default:return{text:"未知",className:"bg-gray-100 text-gray-800"}}})(a.status),e=f.find(b=>b.id===a.categoryId)||{name:"未分类"};return(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-6",children:[a.image&&(0,b.jsx)("div",{className:"w-full md:w-48 h-32 rounded-lg overflow-hidden flex-shrink-0",children:(0,b.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[(0,b.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full mr-3",children:e.name}),(0,b.jsx)("span",{className:`text-xs font-medium px-3 py-1 rounded-full mr-3 ${d.className}`,children:d.text}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:(0,b.jsx)(c.default,{href:`/posts/${a.id}`,className:"hover:text-blue-600 transition-colors",children:a.title})}),(0,b.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:a.excerpt}),"rejected"===a.status&&a.rejectionReason&&(0,b.jsx)("div",{className:"mt-2 p-3 bg-red-50 border border-red-100 rounded-md",children:(0,b.jsxs)("p",{className:"text-sm text-red-700",children:[(0,b.jsx)("strong",{children:"未通过原因:"})," ",a.rejectionReason]})})]})]})},a.id)})}),0===j.length&&(0,b.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,b.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,b.jsx)("p",{className:"text-gray-500",children:"该用户还没有发布任何文章"})]})]}),p&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"修改密码"}),(0,b.jsx)("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"px-6 py-6",children:[J&&(0,b.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md mb-4",children:J}),(0,b.jsxs)("form",{className:"space-y-4",onSubmit:ap,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"oldPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"旧密码"}),(0,b.jsx)("input",{type:"password",id:"oldPassword",value:t,onChange:a=>u(a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${H.oldPassword?"border-red-500":"border-gray-300"}`,placeholder:"请输入旧密码"}),H.oldPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.oldPassword})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"新密码"}),(0,b.jsx)("input",{type:"password",id:"newPassword",value:v,onChange:a=>w(a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${H.newPassword?"border-red-500":"border-gray-300"}`,placeholder:"请输入新密码"}),H.newPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.newPassword})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"确认新密码"}),(0,b.jsx)("input",{type:"password",id:"confirmPassword",value:x,onChange:a=>y(a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${H.confirmPassword?"border-red-500":"border-gray-300"}`,placeholder:"请再次输入新密码"}),H.confirmPassword&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.confirmPassword})]}),"管理员"!==h.name&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"verificationCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱验证码"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",id:"verificationCode",value:z,onChange:a=>A(a.target.value),className:`flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${H.verificationCode?"border-red-500":"border-gray-300"}`,placeholder:"请输入邮箱验证码"}),(0,b.jsx)("button",{type:"button",onClick:av,disabled:B||F>0,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${B||F>0?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:B?"发送中...":F>0?`${F}s后重试`:"发送验证码"})]}),H.verificationCode&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.verificationCode})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,b.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"确认修改"})]})]})]})]})}),L&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"编辑个人信息"}),(0,b.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"px-6 py-6",children:[ad&&(0,b.jsx)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md mb-4",children:ad}),(0,b.jsxs)("form",{className:"space-y-6",onSubmit:as,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"头像"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-20 h-20 rounded-full overflow-hidden border-2 border-gray-200",children:(0,b.jsx)("img",{src:T,alt:"头像预览",className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"file",id:"avatarUpload",accept:"image/jpeg,image/png,image/gif",onChange:aq,className:"hidden"}),(0,b.jsx)("button",{type:"button",onClick:()=>document.getElementById("avatarUpload")?.click(),disabled:X,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${X?"bg-gray-400 cursor-not-allowed":""}`,children:X?"上传中...":"上传头像"}),ab.avatar&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:ab.avatar})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"背景图"}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsx)("div",{className:"h-32 rounded-lg overflow-hidden border-2 border-gray-200",children:(0,b.jsx)("img",{src:V||"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=800&h=200&fit=crop",alt:"背景图预览",className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("input",{type:"file",id:"backgroundUpload",accept:"image/jpeg,image/png,image/gif",onChange:ar,className:"hidden"}),(0,b.jsx)("button",{type:"button",onClick:()=>document.getElementById("backgroundUpload")?.click(),disabled:Z,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${Z?"bg-gray-400 cursor-not-allowed":""}`,children:Z?"上传中...":"上传背景图"}),ab.backgroundImage&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:ab.backgroundImage})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"editName",className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名"}),(0,b.jsx)("input",{type:"text",id:"editName",value:N,onChange:a=>O(a.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${ab.name?"border-red-500":"border-gray-300"}`,placeholder:"请输入用户名"}),ab.name&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:ab.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"editUsernameId",className:"block text-sm font-medium text-gray-700 mb-1",children:"用户名ID"}),(0,b.jsx)("input",{type:"text",id:"editUsernameId",value:P,onChange:a=>Q(a.target.value),disabled:!ah,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${ab.usernameId?"border-red-500":"border-gray-300"} ${!ah?"bg-gray-100 cursor-not-allowed":""}`,placeholder:"请输入用户名ID"}),ab.usernameId&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600",children:ab.usernameId}),!ah&&(0,b.jsxs)("p",{className:"mt-1 text-sm text-yellow-600",children:["用户名ID只能每720小时修改一次，还需等待：",af,"小时"]}),ah&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"用户名ID每720小时可修改一次"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"editBio",className:"block text-sm font-medium text-gray-700 mb-1",children:"个人简介"}),(0,b.jsx)("textarea",{id:"editBio",value:R,onChange:a=>S(a.target.value),rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"请输入个人简介"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,b.jsx)("button",{type:"submit",disabled:_,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${_?"bg-gray-400 cursor-not-allowed":""}`,children:_?"保存中...":"保存修改"})]})]})]})]})}),aj&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"确认修改用户名ID"})}),(0,b.jsxs)("div",{className:"px-6 py-6",children:[(0,b.jsxs)("p",{className:"text-gray-600 mb-4",children:["您确定要将用户名ID从 ",(0,b.jsxs)("strong",{children:["@",h.usernameId]})," 修改为 ",(0,b.jsxs)("strong",{children:["@",P]})," 吗？"]}),(0,b.jsx)("p",{className:"text-yellow-600 text-sm mb-6",children:"注意：用户名ID修改后，您将需要等待720小时才能再次修改。"}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{ak(!1),am(!1)},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"取消"}),(0,b.jsx)("button",{type:"button",onClick:at,disabled:_,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors ${_?"bg-gray-400 cursor-not-allowed":""}`,children:_?"确认中...":"确认修改"})]})]})]})}),(0,b.jsx)(e.default,{isOpen:r,onClose:()=>s(!1),isAdmin:!1})]}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center max-w-md",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"用户不存在"}),(0,b.jsx)("p",{className:"text-gray-600 mb-8",children:"抱歉，您访问的用户不存在。"}),(0,b.jsx)(c.default,{href:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"返回首页"})]})})}a.s(["default",()=>g])}];

//# sourceMappingURL=src_app_users_%5Bid%5D_page_tsx_82b9c804._.js.map