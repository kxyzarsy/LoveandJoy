module.exports=[79181,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(25118);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)({id:0,site_title:"",site_description:"",email:"",phone:"",address:"",social_facebook:"",social_twitter:"",social_instagram:"",social_github:"",social_linkedin:"",quick_links:[{text:"",url:""}],background_color:"#f8f9fa",text_color:"#6c757d",link_color:"#007bff",link_hover_color:"#0056b3",border_color:"#dee2e6",font_size:"14px",layout_columns:3,show_social_media:!0,show_contact_info:!0,show_quick_links:!0,show_copyright:!0,copyright_text:"© 2025 Love and Joy. All rights reserved."}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("");(0,c.useEffect)(()=>{let b=()=>{let b=e.adminAuth.isAuthenticated(),c=e.adminAuth.getCurrentUser();if(!b||!c||"admin"!==c.role)return void a.push("/admin/secret-login")};return b(),(0,e.listenToAdminStateChanges)(b)},[a]);let p=async()=>{i(!0);try{let a=await fetch("/api/footer-config");if(!a.ok)throw Error("获取页尾配置失败");let b=await a.json();"string"==typeof b.quick_links&&(b.quick_links=JSON.parse(b.quick_links)),b.quick_links||(b.quick_links=[{text:"",url:""}]);let c={...b,site_title:b.site_title||"",site_description:b.site_description||"",email:b.email||"",phone:b.phone||"",address:b.address||"",social_facebook:b.social_facebook||"",social_twitter:b.social_twitter||"",social_instagram:b.social_instagram||"",social_github:b.social_github||"",social_linkedin:b.social_linkedin||"",copyright_text:b.copyright_text||""};g(c)}catch(a){console.error("获取页尾配置失败:",a),o("获取页尾配置失败，请刷新页面重试")}finally{i(!1)}};(0,c.useEffect)(()=>{p()},[]);let q=async()=>{k(!0),m(""),o("");try{if(!(await fetch("/api/footer-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).ok)throw Error("保存页尾配置失败");m("页尾配置保存成功！"),setTimeout(()=>{m("")},3e3)}catch(a){console.error("保存页尾配置失败:",a),o("保存页尾配置失败，请重试")}finally{k(!1)}},r=(a,b,c)=>{g(d=>({...d,quick_links:d.quick_links.map((d,e)=>e===a?{...d,[b]:c}:d)}))};return h?(0,b.jsx)("div",{className:"min-h-[calc(100vh-200px)] bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"加载页尾配置..."})]})}):(0,b.jsx)("div",{className:"min-h-[calc(100vh-200px)] bg-gray-50",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"页尾样式管理"}),(0,b.jsx)("button",{onClick:()=>a.push("/admin"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-sm font-medium transition-colors",children:"返回仪表盘"})]}),l&&(0,b.jsxs)("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:[(0,b.jsx)("strong",{className:"font-bold",children:"成功："}),(0,b.jsxs)("span",{className:"block sm:inline",children:[" ",l]})]}),n&&(0,b.jsxs)("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[(0,b.jsx)("strong",{className:"font-bold",children:"错误："}),(0,b.jsxs)("span",{className:"block sm:inline",children:[" ",n]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"基本信息"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"网站标题"}),(0,b.jsx)("input",{type:"text",value:f.site_title,onChange:a=>g(b=>({...b,site_title:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"网站描述"}),(0,b.jsx)("textarea",{value:f.site_description,onChange:a=>g(b=>({...b,site_description:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"联系方式"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱"}),(0,b.jsx)("input",{type:"email",value:f.email,onChange:a=>g(b=>({...b,email:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"电话"}),(0,b.jsx)("input",{type:"tel",value:f.phone,onChange:a=>g(b=>({...b,phone:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"地址"}),(0,b.jsx)("textarea",{value:f.address,onChange:a=>g(b=>({...b,address:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"社交媒体链接"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Facebook"}),(0,b.jsx)("input",{type:"url",value:f.social_facebook,onChange:a=>g(b=>({...b,social_facebook:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://facebook.com/yourpage"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Twitter"}),(0,b.jsx)("input",{type:"url",value:f.social_twitter,onChange:a=>g(b=>({...b,social_twitter:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://twitter.com/yourhandle"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instagram"}),(0,b.jsx)("input",{type:"url",value:f.social_instagram,onChange:a=>g(b=>({...b,social_instagram:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://instagram.com/yourhandle"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GitHub"}),(0,b.jsx)("input",{type:"url",value:f.social_github,onChange:a=>g(b=>({...b,social_github:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/yourusername"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),(0,b.jsx)("input",{type:"url",value:f.social_linkedin,onChange:a=>g(b=>({...b,social_linkedin:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/yourprofile"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"快捷链接"}),(0,b.jsx)("button",{onClick:()=>{g(a=>({...a,quick_links:[...a.quick_links,{text:"",url:""}]}))},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"添加链接"})]}),(0,b.jsx)("div",{className:"space-y-4",children:f.quick_links.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"链接文本"}),(0,b.jsx)("input",{type:"text",value:a.text,onChange:a=>r(c,"text",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"链接文本"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"链接URL"}),(0,b.jsx)("input",{type:"url",value:a.url,onChange:a=>r(c,"url",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]}),(0,b.jsx)("button",{onClick:()=>{g(a=>({...a,quick_links:a.quick_links.filter((a,b)=>b!==c)}))},className:"mt-6 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-medium transition-colors",children:"删除"})]},c))})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"样式设置"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"背景色"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("input",{type:"color",value:f.background_color,onChange:a=>g(b=>({...b,background_color:a.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:f.background_color,onChange:a=>g(b=>({...b,background_color:a.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#ffffff"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"文字颜色"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("input",{type:"color",value:f.text_color,onChange:a=>g(b=>({...b,text_color:a.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:f.text_color,onChange:a=>g(b=>({...b,text_color:a.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#6c757d"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"链接颜色"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("input",{type:"color",value:f.link_color,onChange:a=>g(b=>({...b,link_color:a.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:f.link_color,onChange:a=>g(b=>({...b,link_color:a.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#007bff"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"链接悬停颜色"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("input",{type:"color",value:f.link_hover_color,onChange:a=>g(b=>({...b,link_hover_color:a.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:f.link_hover_color,onChange:a=>g(b=>({...b,link_hover_color:a.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#0056b3"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"边框颜色"}),(0,b.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,b.jsx)("input",{type:"color",value:f.border_color,onChange:a=>g(b=>({...b,border_color:a.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:f.border_color,onChange:a=>g(b=>({...b,border_color:a.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#dee2e6"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"字体大小"}),(0,b.jsx)("input",{type:"text",value:f.font_size,onChange:a=>g(b=>({...b,font_size:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"14px"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"布局设置"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"栏目数量"}),(0,b.jsxs)("select",{value:f.layout_columns,onChange:a=>g(b=>({...b,layout_columns:parseInt(a.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:1,children:"1列"}),(0,b.jsx)("option",{value:2,children:"2列"}),(0,b.jsx)("option",{value:3,children:"3列"}),(0,b.jsx)("option",{value:4,children:"4列"})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:"显示选项"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"show_social_media",checked:f.show_social_media,onChange:a=>g(b=>({...b,show_social_media:a.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"show_social_media",className:"text-sm text-gray-700",children:"显示社交媒体"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"show_contact_info",checked:f.show_contact_info,onChange:a=>g(b=>({...b,show_contact_info:a.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"show_contact_info",className:"text-sm text-gray-700",children:"显示联系信息"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"show_quick_links",checked:f.show_quick_links,onChange:a=>g(b=>({...b,show_quick_links:a.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"show_quick_links",className:"text-sm text-gray-700",children:"显示快捷链接"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"show_copyright",checked:f.show_copyright,onChange:a=>g(b=>({...b,show_copyright:a.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,b.jsx)("label",{htmlFor:"show_copyright",className:"text-sm text-gray-700",children:"显示版权信息"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"版权文本"}),(0,b.jsx)("textarea",{value:f.copyright_text,onChange:a=>g(b=>({...b,copyright_text:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,b.jsx)("button",{onClick:q,disabled:j,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"保存中..."]}):"保存配置"})})]})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=src_app_admin_footer-config_page_tsx_29ef75f9._.js.map