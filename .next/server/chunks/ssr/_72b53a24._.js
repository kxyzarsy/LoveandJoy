module.exports=[38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},94726,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(72131);function e(){let[a,e]=(0,d.useState)([]),[f,g]=(0,d.useState)([]),[h,i]=(0,d.useState)(""),[j,k]=(0,d.useState)(1),[l]=(0,d.useState)(10),[m,n]=(0,d.useState)(!0),[o,p]=(0,d.useState)(null);(0,d.useEffect)(()=>{let a=async()=>{n(!0);try{let a=await fetch("/api/posts");if(!a.ok)throw a;let b=await a.json();(b=(b=(b=b.map(a=>({...a,likes:a.likes||0}))).map(a=>({...a,status:a.status||"published"}))).filter(a=>"published"===a.status)).sort((a,b)=>b.likes-a.likes),e(b),g(b),p(null)}catch(a){p(a instanceof Error?a.message:"获取文章失败")}finally{n(!1)}};a();let b=new Date,c=new Date(b);c.setHours(12,0,0,0),b>c&&c.setDate(c.getDate()+1);let d=setTimeout(()=>{a(),setInterval(a,864e5)},c.getTime()-b.getTime());return()=>{clearTimeout(d)}},[]),(0,d.useEffect)(()=>{if(""===h.trim())g(a);else{let b=h.toLowerCase();g(a.filter(a=>a.title.toLowerCase().includes(b)||a.excerpt.toLowerCase().includes(b)||a.content.toLowerCase().includes(b)))}k(1)},[h,a]);let q=j*l,r=f.slice(q-l,q),s=Math.ceil(f.length/l),t=a=>{k(a)};return m?(0,b.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o?(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-8 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"加载失败"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:o}),(0,b.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"重试"})]}):(0,b.jsxs)("div",{className:"space-y-12",children:[(0,b.jsxs)("section",{className:"text-center py-12 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl shadow-sm",children:[(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-900 mb-4",children:"全部文章"}),(0,b.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"浏览所有文章，按热度排序"})]}),(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm p-6",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"搜索文章标题、摘要或内容...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h,onChange:a=>i(a.target.value)}),(0,b.jsx)("div",{className:"absolute right-3 top-3",children:(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"文章列表"}),(0,b.jsxs)("span",{className:"text-gray-600",children:["共 ",f.length," 篇文章"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(a=>(0,b.jsxs)("article",{className:"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[a.image&&(0,b.jsxs)("div",{className:"relative h-48 overflow-hidden",children:[(0,b.jsx)("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110"}),(0,b.jsx)("div",{className:"absolute top-3 left-3",children:(0,b.jsx)(c.default,{href:`/categories/${a.category?.slug||"uncategorized"}`,className:"bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full hover:bg-blue-200 transition-colors",children:a.category?.name||"未分类"})})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-3",children:[(0,b.jsxs)("span",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"})}),new Date(a.createdAt).toLocaleDateString()]}),(0,b.jsx)("span",{className:"mx-2",children:"•"}),(0,b.jsxs)("span",{className:"flex items-center",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),a.author?.name||"未知作者"]})]}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-3 line-clamp-2",children:(0,b.jsx)(c.default,{href:`/posts/${a.id}`,className:"hover:text-blue-600 transition-colors",children:a.title})}),(0,b.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-3",children:a.excerpt}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,b.jsxs)(c.default,{href:`/posts/${a.id}`,className:"inline-flex items-center text-blue-600 font-medium hover:text-blue-800 transition-colors group",children:["阅读更多",(0,b.jsx)("svg",{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]}),(0,b.jsxs)("div",{className:"flex items-center text-gray-500",children:[(0,b.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),(0,b.jsx)("span",{children:a.likes})]})]})]})]},a.id))}),s>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[j>1&&(0,b.jsx)("button",{onClick:()=>t(j-1),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"上一页"}),Array.from({length:s},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>t(a),className:`px-4 py-2 border rounded-lg text-sm font-medium transition-colors ${j===a?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a},a)),j<s&&(0,b.jsx)("button",{onClick:()=>t(j+1),className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"下一页"})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=_72b53a24._.js.map