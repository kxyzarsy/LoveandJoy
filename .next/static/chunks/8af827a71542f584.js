(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1947,e=>{"use strict";var s=e.i(43476),l=e.i(71645),r=e.i(18566),t=e.i(89001);function o(){let e=(0,r.useRouter)(),[o,a]=(0,l.useState)({id:0,site_title:"",site_description:"",email:"",phone:"",address:"",social_facebook:"",social_twitter:"",social_instagram:"",social_github:"",social_linkedin:"",quick_links:[{text:"",url:""}],background_color:"#f8f9fa",text_color:"#6c757d",link_color:"#007bff",link_hover_color:"#0056b3",border_color:"#dee2e6",font_size:"14px",layout_columns:3,show_social_media:!0,show_contact_info:!0,show_quick_links:!0,show_copyright:!0,copyright_text:"© 2025 Love and Joy. All rights reserved."}),[i,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1),[u,x]=(0,l.useState)(""),[m,h]=(0,l.useState)("");(0,l.useEffect)(()=>{let s=()=>{let s=t.adminAuth.isAuthenticated(),l=t.adminAuth.getCurrentUser();if(!s||!l||"admin"!==l.role)return void e.push("/admin/secret-login")};return s(),(0,t.listenToAdminStateChanges)(s)},[e]);let g=async()=>{n(!0);try{let e=await fetch("/api/footer-config");if(!e.ok)throw Error("获取页尾配置失败");let s=await e.json();"string"==typeof s.quick_links&&(s.quick_links=JSON.parse(s.quick_links)),s.quick_links||(s.quick_links=[{text:"",url:""}]);let l={...s,site_title:s.site_title||"",site_description:s.site_description||"",email:s.email||"",phone:s.phone||"",address:s.address||"",social_facebook:s.social_facebook||"",social_twitter:s.social_twitter||"",social_instagram:s.social_instagram||"",social_github:s.social_github||"",social_linkedin:s.social_linkedin||"",copyright_text:s.copyright_text||""};a(l)}catch(e){console.error("获取页尾配置失败:",e),h("获取页尾配置失败，请刷新页面重试")}finally{n(!1)}};(0,l.useEffect)(()=>{g()},[]);let b=async()=>{d(!0),x(""),h("");try{if(!(await fetch("/api/footer-config",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw Error("保存页尾配置失败");x("页尾配置保存成功！"),setTimeout(()=>{x("")},3e3)}catch(e){console.error("保存页尾配置失败:",e),h("保存页尾配置失败，请重试")}finally{d(!1)}},p=(e,s,l)=>{a(r=>({...r,quick_links:r.quick_links.map((r,t)=>t===e?{...r,[s]:l}:r)}))};return i?(0,s.jsx)("div",{className:"min-h-[calc(100vh-200px)] bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"加载页尾配置..."})]})}):(0,s.jsx)("div",{className:"min-h-[calc(100vh-200px)] bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"页尾样式管理"}),(0,s.jsx)("button",{onClick:()=>e.push("/admin"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-md text-sm font-medium transition-colors",children:"返回仪表盘"})]}),u&&(0,s.jsxs)("div",{className:"mb-6 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:[(0,s.jsx)("strong",{className:"font-bold",children:"成功："}),(0,s.jsxs)("span",{className:"block sm:inline",children:[" ",u]})]}),m&&(0,s.jsxs)("div",{className:"mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[(0,s.jsx)("strong",{className:"font-bold",children:"错误："}),(0,s.jsxs)("span",{className:"block sm:inline",children:[" ",m]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"基本信息"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"网站标题"}),(0,s.jsx)("input",{type:"text",value:o.site_title,onChange:e=>a(s=>({...s,site_title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"网站描述"}),(0,s.jsx)("textarea",{value:o.site_description,onChange:e=>a(s=>({...s,site_description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"联系方式"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"邮箱"}),(0,s.jsx)("input",{type:"email",value:o.email,onChange:e=>a(s=>({...s,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"电话"}),(0,s.jsx)("input",{type:"tel",value:o.phone,onChange:e=>a(s=>({...s,phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"地址"}),(0,s.jsx)("textarea",{value:o.address,onChange:e=>a(s=>({...s,address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"社交媒体链接"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Facebook"}),(0,s.jsx)("input",{type:"url",value:o.social_facebook,onChange:e=>a(s=>({...s,social_facebook:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://facebook.com/yourpage"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Twitter"}),(0,s.jsx)("input",{type:"url",value:o.social_twitter,onChange:e=>a(s=>({...s,social_twitter:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://twitter.com/yourhandle"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instagram"}),(0,s.jsx)("input",{type:"url",value:o.social_instagram,onChange:e=>a(s=>({...s,social_instagram:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://instagram.com/yourhandle"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"GitHub"}),(0,s.jsx)("input",{type:"url",value:o.social_github,onChange:e=>a(s=>({...s,social_github:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://github.com/yourusername"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn"}),(0,s.jsx)("input",{type:"url",value:o.social_linkedin,onChange:e=>a(s=>({...s,social_linkedin:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/yourprofile"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"快捷链接"}),(0,s.jsx)("button",{onClick:()=>{a(e=>({...e,quick_links:[...e.quick_links,{text:"",url:""}]}))},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors",children:"添加链接"})]}),(0,s.jsx)("div",{className:"space-y-4",children:o.quick_links.map((e,l)=>(0,s.jsxs)("div",{className:"flex gap-2 items-start",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"链接文本"}),(0,s.jsx)("input",{type:"text",value:e.text,onChange:e=>p(l,"text",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"链接文本"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"链接URL"}),(0,s.jsx)("input",{type:"url",value:e.url,onChange:e=>p(l,"url",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com"})]})]}),(0,s.jsx)("button",{onClick:()=>{a(e=>({...e,quick_links:e.quick_links.filter((e,s)=>s!==l)}))},className:"mt-6 px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm font-medium transition-colors",children:"删除"})]},l))})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"样式设置"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"背景色"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"color",value:o.background_color,onChange:e=>a(s=>({...s,background_color:e.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:o.background_color,onChange:e=>a(s=>({...s,background_color:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#ffffff"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"文字颜色"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"color",value:o.text_color,onChange:e=>a(s=>({...s,text_color:e.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:o.text_color,onChange:e=>a(s=>({...s,text_color:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#6c757d"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"链接颜色"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"color",value:o.link_color,onChange:e=>a(s=>({...s,link_color:e.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:o.link_color,onChange:e=>a(s=>({...s,link_color:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#007bff"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"链接悬停颜色"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"color",value:o.link_hover_color,onChange:e=>a(s=>({...s,link_hover_color:e.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:o.link_hover_color,onChange:e=>a(s=>({...s,link_hover_color:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#0056b3"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"边框颜色"}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"color",value:o.border_color,onChange:e=>a(s=>({...s,border_color:e.target.value})),className:"w-12 h-12 border border-gray-300 rounded cursor-pointer"}),(0,s.jsx)("input",{type:"text",value:o.border_color,onChange:e=>a(s=>({...s,border_color:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"#dee2e6"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"字体大小"}),(0,s.jsx)("input",{type:"text",value:o.font_size,onChange:e=>a(s=>({...s,font_size:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"14px"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"布局设置"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"栏目数量"}),(0,s.jsxs)("select",{value:o.layout_columns,onChange:e=>a(s=>({...s,layout_columns:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:1,children:"1列"}),(0,s.jsx)("option",{value:2,children:"2列"}),(0,s.jsx)("option",{value:3,children:"3列"}),(0,s.jsx)("option",{value:4,children:"4列"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-800",children:"显示选项"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"show_social_media",checked:o.show_social_media,onChange:e=>a(s=>({...s,show_social_media:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"show_social_media",className:"text-sm text-gray-700",children:"显示社交媒体"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"show_contact_info",checked:o.show_contact_info,onChange:e=>a(s=>({...s,show_contact_info:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"show_contact_info",className:"text-sm text-gray-700",children:"显示联系信息"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"show_quick_links",checked:o.show_quick_links,onChange:e=>a(s=>({...s,show_quick_links:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"show_quick_links",className:"text-sm text-gray-700",children:"显示快捷链接"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"show_copyright",checked:o.show_copyright,onChange:e=>a(s=>({...s,show_copyright:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"show_copyright",className:"text-sm text-gray-700",children:"显示版权信息"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"版权文本"}),(0,s.jsx)("textarea",{value:o.copyright_text,onChange:e=>a(s=>({...s,copyright_text:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6",children:(0,s.jsx)("button",{onClick:b,disabled:c,className:"w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"保存中..."]}):"保存配置"})})]})]})]})})}e.s(["default",()=>o])}]);